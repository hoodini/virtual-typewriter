@import "tailwindcss";
@import "tw-animate-css";
/* Font loaded via layout.tsx link tag */

/* ========================================
   VIRTUAL TYPEWRITER - DESIGN SYSTEM
   Based on reference images and Figma specs
   ======================================== */

@theme inline {
  /* Primary Typewriter Colors from Design System */
  --color-aged-cream: #F2E8C9;
  --color-matte-gunmetal: #4B5052;
  --color-oxidized-brass: #8A7C4F;
  --color-forest-green: #2A4B3A;
  --color-burgundy-leather: #6B1E2F;

  /* Additional atmosphere colors */
  --color-desk-wood: #3D2B1F;
  --color-lamp-glow: #FFE4B5;
  --color-shadow-dark: #1A1A1A;
  --color-chrome: #C0C0C0;
  --color-chrome-highlight: #E8E8E8;
  --color-ink-black: #1A1A1A;
  --color-ink-red: #8B0000;

  /* Paper textures */
  --color-paper-standard: #F2E8C9;
  --color-paper-coffee: #E6D5B8;
  --color-paper-yellowed: #E8DCC4;

  /* Fonts */
  --font-typewriter: 'Prestige Elite Std', 'Courier New', monospace;
  --font-secondary: 'American Typewriter', 'Courier New', serif;
}

/* ========== ROOT VARIABLES ========== */
:root {
  --background: #1A1A1A;
  --foreground: #F2E8C9;

  /* Ink density levels */
  --ink-high: 1;
  --ink-medium: 0.7;
  --ink-low: 0.4;

  /* Animation timing */
  --key-press-duration: 80ms;
  --typebar-swing-duration: 60ms;
  --carriage-advance-duration: 50ms;
  --carriage-return-duration: 400ms;
}

/* ========== BASE STYLES ========== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  overflow: hidden;
  user-select: none;
  -webkit-user-select: none;
}

body {
  background: linear-gradient(180deg, #1A1A1A 0%, #0D0D0D 100%);
  color: var(--foreground);
  font-family: var(--font-typewriter);
}

/* ========== DESK ENVIRONMENT ========== */
.desk-surface {
  background: linear-gradient(
    180deg,
    #2D1F16 0%,
    #3D2B1F 40%,
    #4A3728 100%
  );
  position: relative;
}

.desk-surface::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image:
    repeating-linear-gradient(
      90deg,
      transparent,
      transparent 100px,
      rgba(0,0,0,0.03) 100px,
      rgba(0,0,0,0.03) 200px
    );
  pointer-events: none;
}

/* Warm lamp glow effect */
.lamp-glow {
  position: absolute;
  width: 600px;
  height: 600px;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 228, 181, 0.15) 0%,
    rgba(255, 200, 120, 0.08) 30%,
    transparent 70%
  );
  border-radius: 50%;
  pointer-events: none;
  filter: blur(40px);
}

/* ========== TYPEWRITER HOUSING ========== */
.typewriter-housing {
  background: linear-gradient(
    145deg,
    var(--color-forest-green) 0%,
    #1F3A2B 50%,
    #162A1F 100%
  );
  border-radius: 16px 16px 8px 8px;
  box-shadow:
    0 20px 60px rgba(0,0,0,0.5),
    0 0 0 2px var(--color-oxidized-brass),
    inset 0 2px 4px rgba(255,255,255,0.1),
    inset 0 -2px 4px rgba(0,0,0,0.3);
  position: relative;
}

.typewriter-housing.burgundy {
  background: linear-gradient(
    145deg,
    var(--color-burgundy-leather) 0%,
    #4A1420 50%,
    #320D15 100%
  );
}

.typewriter-housing.black {
  background: linear-gradient(
    145deg,
    var(--color-matte-gunmetal) 0%,
    #363A3C 50%,
    #252829 100%
  );
}

/* Housing wear/patina effect */
.typewriter-housing::after {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(
      ellipse at 20% 20%,
      rgba(255,255,255,0.05) 0%,
      transparent 50%
    ),
    radial-gradient(
      ellipse at 80% 80%,
      rgba(0,0,0,0.1) 0%,
      transparent 40%
    );
  border-radius: inherit;
  pointer-events: none;
}

/* Brass trim accents */
.brass-trim {
  background: linear-gradient(
    180deg,
    #A89058 0%,
    var(--color-oxidized-brass) 50%,
    #6B5F3E 100%
  );
  box-shadow:
    0 1px 2px rgba(0,0,0,0.3),
    inset 0 1px 1px rgba(255,255,255,0.3);
}

/* ========== TYPEWRITER KEYS ========== */
.typewriter-key {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: linear-gradient(
    145deg,
    #F5F5F5 0%,
    #E8E8E8 30%,
    #D0D0D0 100%
  );
  border: 3px solid var(--color-chrome);
  box-shadow:
    0 4px 8px rgba(0,0,0,0.4),
    0 2px 4px rgba(0,0,0,0.2),
    inset 0 2px 4px rgba(255,255,255,0.8),
    inset 0 -1px 2px rgba(0,0,0,0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Special Elite', var(--font-typewriter);
  font-size: 14px;
  color: #1A1A1A;
  cursor: pointer;
  transition: transform var(--key-press-duration) ease-out,
              box-shadow var(--key-press-duration) ease-out;
  position: relative;
}

/* Glass effect on keys */
.typewriter-key::before {
  content: '';
  position: absolute;
  top: 3px;
  left: 8px;
  right: 8px;
  height: 40%;
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.6) 0%,
    rgba(255,255,255,0.1) 100%
  );
  border-radius: 50% 50% 40% 40%;
  pointer-events: none;
}

/* Chrome bezel ring */
.typewriter-key::after {
  content: '';
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  background: linear-gradient(
    145deg,
    var(--color-chrome-highlight) 0%,
    var(--color-chrome) 50%,
    #909090 100%
  );
  z-index: -1;
}

.typewriter-key:hover {
  transform: translateY(1px);
  box-shadow:
    0 3px 6px rgba(0,0,0,0.4),
    0 1px 3px rgba(0,0,0,0.2),
    inset 0 2px 4px rgba(255,255,255,0.8),
    inset 0 -1px 2px rgba(0,0,0,0.1);
}

.typewriter-key.pressed {
  transform: translateY(4px);
  box-shadow:
    0 1px 2px rgba(0,0,0,0.4),
    inset 0 2px 4px rgba(0,0,0,0.2);
}

/* Special keys (Shift, Space, etc.) */
.typewriter-key.wide {
  width: 88px;
  border-radius: 22px;
}

.typewriter-key.wide::after {
  border-radius: 25px;
}

.typewriter-key.extra-wide {
  width: 200px;
  border-radius: 22px;
}

.typewriter-key.extra-wide::after {
  border-radius: 25px;
}

/* ========== PAPER STYLES ========== */
.paper {
  background-color: var(--color-paper-standard);
  position: relative;
  box-shadow:
    0 2px 8px rgba(0,0,0,0.2),
    2px 0 8px rgba(0,0,0,0.1);
}

/* Paper texture overlay */
.paper::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.03;
  pointer-events: none;
}

.paper.coffee-stained {
  background-color: var(--color-paper-coffee);
  background-image:
    radial-gradient(
      ellipse at 30% 70%,
      rgba(139, 90, 43, 0.08) 0%,
      transparent 50%
    ),
    radial-gradient(
      ellipse at 70% 30%,
      rgba(139, 90, 43, 0.05) 0%,
      transparent 40%
    );
}

.paper.yellowed {
  background-color: var(--color-paper-yellowed);
  background-image:
    linear-gradient(
      180deg,
      rgba(180, 140, 80, 0.05) 0%,
      transparent 20%,
      transparent 80%,
      rgba(180, 140, 80, 0.05) 100%
    );
}

/* Paper curl effect */
.paper-curl {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 40px;
  height: 40px;
  background: linear-gradient(
    315deg,
    rgba(0,0,0,0.1) 0%,
    transparent 50%
  );
  clip-path: polygon(100% 0, 100% 100%, 0 100%);
}

/* ========== TYPED TEXT ========== */
.typed-text {
  font-family: 'Special Elite', var(--font-typewriter);
  font-size: 16px;
  line-height: 24px;
  color: var(--color-ink-black);
  white-space: pre-wrap;
  word-break: break-word;
}

.typed-char {
  display: inline-block;
  position: relative;
}

/* Ink density variations */
.typed-char.ink-high {
  opacity: 1;
}

.typed-char.ink-medium {
  opacity: 0.75;
}

.typed-char.ink-low {
  opacity: 0.5;
}

/* Character imperfections */
.typed-char.slight-rotate {
  transform: rotate(var(--char-rotation, 0deg));
}

.typed-char.slight-offset {
  transform: translateY(var(--char-offset, 0px));
}

/* Double-strike / ghost effect */
.typed-char.ghost::after {
  content: attr(data-char);
  position: absolute;
  top: 0.5px;
  left: 0.5px;
  opacity: 0.15;
  pointer-events: none;
}

/* Red ink */
.typed-char.red-ink {
  color: var(--color-ink-red);
}

/* Strikethrough for "deleted" text */
.typed-char.strikethrough::before {
  content: 'X';
  position: absolute;
  top: 0;
  left: 0;
  color: var(--color-ink-black);
}

/* ========== CARRIAGE & PLATEN ========== */
.platen {
  background: linear-gradient(
    90deg,
    #1A1A1A 0%,
    #2A2A2A 10%,
    #2A2A2A 90%,
    #1A1A1A 100%
  );
  border-radius: 8px;
  box-shadow:
    inset 0 2px 8px rgba(0,0,0,0.5),
    0 2px 4px rgba(0,0,0,0.3);
}

.carriage {
  position: relative;
  transition: transform var(--carriage-advance-duration) ease-out;
}

.carriage-return-lever {
  background: linear-gradient(
    145deg,
    var(--color-chrome-highlight) 0%,
    var(--color-chrome) 50%,
    #808080 100%
  );
  border-radius: 4px;
  cursor: pointer;
  box-shadow:
    0 2px 4px rgba(0,0,0,0.3),
    inset 0 1px 2px rgba(255,255,255,0.5);
  transition: transform 0.1s ease;
}

.carriage-return-lever:hover {
  transform: rotate(-5deg);
}

.carriage-return-lever:active {
  transform: rotate(-15deg) translateX(-10px);
}

/* Ruler markings on carriage */
.carriage-ruler {
  background: linear-gradient(
    180deg,
    var(--color-oxidized-brass) 0%,
    #7A6C4A 100%
  );
  position: relative;
}

.carriage-ruler::after {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 9px,
    rgba(0,0,0,0.3) 9px,
    rgba(0,0,0,0.3) 10px
  );
}

/* ========== RIBBON SPOOLS ========== */
.ribbon-spool {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(
    145deg,
    #2A2A2A 0%,
    #1A1A1A 100%
  );
  border: 3px solid var(--color-oxidized-brass);
  box-shadow:
    0 4px 8px rgba(0,0,0,0.4),
    inset 0 2px 4px rgba(255,255,255,0.1);
  position: relative;
  overflow: hidden;
}

.ribbon-spool::before {
  content: '';
  position: absolute;
  inset: 8px;
  border-radius: 50%;
  background: linear-gradient(
    145deg,
    var(--color-oxidized-brass) 0%,
    #6B5F3E 100%
  );
}

/* Ribbon amount indicator */
.ribbon-spool .ribbon-amount {
  position: absolute;
  inset: 15px;
  border-radius: 50%;
  background: #1A1A1A;
  border: 2px solid #0A0A0A;
}

.ribbon-spool .ribbon-fill {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg,
    #1A1A1A 0%,
    #1A1A1A var(--ribbon-remaining, 100%),
    transparent var(--ribbon-remaining, 100%)
  );
}

/* ========== TYPEBARS ========== */
.typebar-container {
  perspective: 500px;
  transform-style: preserve-3d;
}

.typebar {
  width: 8px;
  height: 80px;
  background: linear-gradient(
    90deg,
    #808080 0%,
    var(--color-chrome) 50%,
    #808080 100%
  );
  transform-origin: bottom center;
  position: absolute;
  bottom: 0;
  border-radius: 2px;
  box-shadow: 0 0 2px rgba(0,0,0,0.3);
}

.typebar-head {
  width: 12px;
  height: 16px;
  background: linear-gradient(
    180deg,
    var(--color-chrome) 0%,
    #909090 100%
  );
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  border-radius: 2px;
  box-shadow: 0 -1px 2px rgba(0,0,0,0.2);
}

/* Typebar swing animation */
@keyframes typebar-swing {
  0% { transform: rotateX(0deg); }
  50% { transform: rotateX(-60deg); }
  100% { transform: rotateX(0deg); }
}

.typebar.striking {
  animation: typebar-swing var(--typebar-swing-duration) ease-out;
}

/* Typebar jam state */
.typebar.jammed {
  transform: rotateX(-45deg);
  z-index: 10;
}

/* ========== MARGIN BELL ========== */
.margin-bell {
  width: 24px;
  height: 24px;
  background: radial-gradient(
    circle at 30% 30%,
    #D4AF37 0%,
    var(--color-oxidized-brass) 50%,
    #6B5F3E 100%
  );
  border-radius: 50%;
  box-shadow:
    0 2px 4px rgba(0,0,0,0.3),
    inset 0 -2px 4px rgba(0,0,0,0.2);
}

@keyframes bell-ring {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(5deg); }
  75% { transform: rotate(-5deg); }
}

.margin-bell.ringing {
  animation: bell-ring 0.1s ease-in-out 3;
}

/* ========== SETTINGS PANEL ========== */
.settings-panel {
  background: linear-gradient(
    180deg,
    #2A2A2A 0%,
    #1A1A1A 100%
  );
  border: 2px solid var(--color-oxidized-brass);
  border-radius: 8px;
  box-shadow:
    0 20px 60px rgba(0,0,0,0.6),
    inset 0 1px 2px rgba(255,255,255,0.1);
}

.settings-panel h2 {
  font-family: 'Special Elite', var(--font-secondary);
  color: var(--color-aged-cream);
  border-bottom: 1px solid var(--color-oxidized-brass);
}

/* ========== TOOLTIPS ========== */
.tooltip {
  background: rgba(26, 26, 26, 0.95);
  border: 1px solid var(--color-oxidized-brass);
  border-radius: 8px;
  padding: 12px 16px;
  color: var(--color-aged-cream);
  font-family: 'Special Elite', var(--font-typewriter);
  font-size: 14px;
  max-width: 300px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4);
}

.tooltip-title {
  color: var(--color-oxidized-brass);
  font-weight: bold;
  margin-bottom: 8px;
}

/* ========== JAM OVERLAY ========== */
.jam-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.jam-modal {
  background: linear-gradient(
    145deg,
    #2A2A2A 0%,
    #1A1A1A 100%
  );
  border: 3px solid var(--color-oxidized-brass);
  border-radius: 12px;
  padding: 32px;
  max-width: 400px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0,0,0,0.8);
}

/* ========== MOBILE WARNING ========== */
.mobile-warning {
  background: linear-gradient(
    180deg,
    var(--color-forest-green) 0%,
    #1F3A2B 100%
  );
  border: 2px solid var(--color-oxidized-brass);
  border-radius: 12px;
  padding: 24px;
  text-align: center;
  color: var(--color-aged-cream);
  font-family: 'Special Elite', var(--font-typewriter);
}

/* ========== ANIMATIONS ========== */
@keyframes carriage-return {
  0% { transform: translateX(0); }
  100% { transform: translateX(var(--carriage-start, 0)); }
}

@keyframes paper-feed {
  0% { transform: translateY(0); }
  100% { transform: translateY(-24px); }
}

@keyframes key-click {
  0% { transform: translateY(0); }
  50% { transform: translateY(4px); }
  100% { transform: translateY(0); }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

/* ========== FOCUS STATES ========== */
*:focus-visible {
  outline: 2px solid var(--color-oxidized-brass);
  outline-offset: 2px;
}

/* ========== SCROLLBAR ========== */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #1A1A1A;
}

::-webkit-scrollbar-thumb {
  background: var(--color-oxidized-brass);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #A89058;
}

/* ========== UTILITY CLASSES ========== */
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
